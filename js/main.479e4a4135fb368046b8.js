(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"8Lv4":function(e,t,s){var n=s("N5i1");"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(n,i);n.locals&&(e.exports=n.locals)},N5i1:function(e,t,s){},Vtdi:function(e,t,s){"use strict";s.r(t);var n=s("v5Mq");function i(e,t,s,i){const r=[];for(let o=i-1;o>=0;o--)for(let a=0;a<i;a++){const i=a*s-t/2+s/2,c=o*s-t/2+s/2,u=h(e.add(new n.Vector3(i,c,0)),s);r.push(u)}return r.flat()}function r(e,t,s,i){const r=[];for(let o=i-1;o>=0;o--)for(let a=i-1;a>=0;a--){const i=a*s-t/2+s/2,c=o*s-t/2+s/2,u=d(e.add(new n.Vector3(i,c,0)),s);r.push(u)}return r.flat()}function o(e,t,s,i){const r=[];for(let o=i-1;o>=0;o--)for(let a=0;a<i;a++){const i=a*s-t/2+s/2,c=o*s-t/2+s/2,u=l(e.add(new n.Vector3(i,0,c)),s);r.push(u)}return r.flat()}function a(e,t,s,i){const r=[];for(let o=0;o<i;o++)for(let a=0;a<i;a++){const i=a*s-t/2+s/2,c=o*s-t/2+s/2,u=f(e.add(new n.Vector3(i,0,c)),s);r.push(u)}return r.flat()}function c(e,t,s,i){const r=[];for(let o=i-1;o>=0;o--)for(let a=0;a<i;a++){const i=a*s-t/2+s/2,c=o*s-t/2+s/2,u=p(e.add(new n.Vector3(0,c,i)),s);r.push(u)}return r.flat()}function u(e,t,s,i){const r=[];for(let o=i-1;o>=0;o--)for(let a=i-1;a>=0;a--){const i=a*s-t/2+s/2,c=o*s-t/2+s/2,u=w(e.add(new n.Vector3(0,c,i)),s);r.push(u)}return r.flat()}function h(e,t){const s=e.x,n=e.y,i=e.z,r=t/2;return[s,n,i,s-r,n+r,i,s-r,n,i,s,n,i,s,n+r,i,s-r,n+r,i,s,n,i,s+r,n+r,i,s,n+r,i,s,n,i,s+r,n,i,s+r,n+r,i,s,n,i,s+r,n-r,i,s+r,n,i,s,n,i,s,n-r,i,s+r,n-r,i,s,n,i,s-r,n-r,i,s,n-r,i,s,n,i,s-r,n,i,s-r,n-r,i]}function d(e,t){const s=e.x,n=e.y,i=e.z,r=t/2;return[s,n,i,s+r,n+r,i,s+r,n,i,s,n,i,s,n+r,i,s+r,n+r,i,s,n,i,s-r,n+r,i,s,n+r,i,s,n,i,s-r,n,i,s-r,n+r,i,s,n,i,s-r,n-r,i,s-r,n,i,s,n,i,s,n-r,i,s-r,n-r,i,s,n,i,s+r,n-r,i,s,n-r,i,s,n,i,s+r,n,i,s+r,n-r,i]}function l(e,t){const s=e.x,n=e.y,i=e.z,r=t/2;return[s,n,i,s-r,n,i+r,s-r,n,i,s,n,i,s,n,i+r,s-r,n,i+r,s,n,i,s+r,n,i+r,s,n,i+r,s,n,i,s+r,n,i,s+r,n,i+r,s,n,i,s+r,n,i-r,s+r,n,i,s,n,i,s,n,i-r,s+r,n,i-r,s,n,i,s-r,n,i-r,s,n,i-r,s,n,i,s-r,n,i,s-r,n,i-r]}function f(e,t){const s=e.x,n=e.y,i=e.z,r=t/2;return[s,n,i,s-r,n,i-r,s-r,n,i,s,n,i,s,n,i-r,s-r,n,i-r,s,n,i,s+r,n,i-r,s,n,i-r,s,n,i,s+r,n,i,s+r,n,i-r,s,n,i,s+r,n,i+r,s+r,n,i,s,n,i,s,n,i+r,s+r,n,i+r,s,n,i,s-r,n,i+r,s,n,i+r,s,n,i,s-r,n,i,s-r,n,i+r]}function p(e,t){const s=e.x,n=e.y,i=e.z,r=t/2;return[s,n,i,s,n+r,i-r,s,n,i-r,s,n,i,s,n+r,i,s,n+r,i-r,s,n,i,s,n+r,i+r,s,n+r,i,s,n,i,s,n,i+r,s,n+r,i+r,s,n,i,s,n-r,i+r,s,n,i+r,s,n,i,s,n-r,i,s,n-r,i+r,s,n,i,s,n-r,i-r,s,n-r,i,s,n,i,s,n,i-r,s,n-r,i-r]}function w(e,t){const s=e.x,n=e.y,i=e.z,r=t/2;return[s,n,i,s,n+r,i+r,s,n,i+r,s,n,i,s,n+r,i,s,n+r,i+r,s,n,i,s,n+r,i-r,s,n+r,i,s,n,i,s,n,i-r,s,n+r,i-r,s,n,i,s,n-r,i-r,s,n,i-r,s,n,i,s,n-r,i,s,n-r,i-r,s,n,i,s,n-r,i+r,s,n-r,i,s,n,i,s,n,i+r,s,n-r,i+r]}class m{constructor(e,t,s,n,i){this.name=e,this.position=t,this.size=s,this.planet=n,this.isSide=s===2*this.planet.radius,this.mesh,this.corners,this.distance,this.isVisible=!1,this.isInFrustum=!1,this.isActive=!0,this.nodes=null,this.id=i||-1,this.material=-1==this.id?this.planet.material:function(e,t){switch(t){case 0:return e.customMaterials[0];case 1:return e.customMaterials[1];case 2:return e.customMaterials[2];case 3:return e.customMaterials[3]}}(this.planet.scene,i),this.minNodeSize=1,this.nodeUpdateDistance=Math.pow(this.size,1.25),this.generateTerrain=!0,this.perlinFreq=8/this.planet.radius,this.perlinDir=1.25*this.planet.radius,this.perlinAmp=.05,this.onCreate()}onCreate(){this.mesh=this.generateMesh(),this.mapCubeToShere()}setDistance(e){const t=e.globalPosition;this.distance=this.corners.map(e=>BABYLON.Vector3.Distance(e,t)).reduce((e,t)=>e<t?e:t)}setIsVisible(e){const t=e.globalPosition;this.isInFrustum=e.isInFrustum(this.mesh),this.isVisible=this.distance<BABYLON.Vector3.Distance(this.planet.position,t)}isRenderable(){return this.isVisible&&this.isInFrustum}generateMesh(){const e=new n.Mesh("",this.planet.scene);return function(e,t,s,h){const d=Math.pow(h,2),l=s/h,f=Array.from(Array(24*d).keys());let p;switch(e){case"Front":p=i;break;case"Back":p=r;break;case"Up":p=o;break;case"Down":p=a;break;case"Right":p=c;break;case"Left":p=u}const w=new n.VertexData;return w.positions=p(t,s,l,h),w.indices=f,w}(this.name,this.position,this.size,this.planet.resolution,this.planet.scene).applyToMesh(e,!0),e.material=this.material,e.cullingStrategy=n.AbstractMesh.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,e}getCorners(e,t){const s=e.getVerticesData(BABYLON.VertexBuffer.PositionKind);return[3,24*(t-1)*3+21,t*(t-1)*24*3+57,24*(t-1+t*(t-1))*3+39].map(e=>{const t=s[e],i=s[e+1],r=s[e+2];return new n.Vector3(t,i,r)})}mapCubeToShere(){const e=this.figureRoundFunc(this.planet.radius,this.planet.position),t=function(e,t,s){const n=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),i=s,r=2*i+1;for(let e=0;e<r;e++)for(let s=0;s<r;s++){let o=[];const a=0==s||s==r-1,c=0==e||e==r-1,u=s%2==0,h=e%2==0;if(a||c)if(a&&c)if(0==s&&0==e)o=[3,15];else if(s==r-1&&0==e){const e=24*(i-1)*3;o=[e+21,e+33]}else if(0==s&&e==r-1){const e=i*(i-1)*24*3;o=[e+57,e+69]}else{const e=24*(i-1+i*(i-1))*3;o=[e+39,e+51]}else if(a&&!c)if(0==s)if(h){const t=i*(e/2-1)*24*3,s=i*(e/2)*24*3;o=[t+57,t+69,s+3,s+15]}else{const t=i*((e+1)/2-1)*24*3;o=[t+6,t+66]}else if(h){const t=24*(i-1+i*(e/2-1))*3,s=24*(i-1+i*(e/2))*3;o=[t+39,t+51,s+21,s+33]}else{const t=24*(i-1+i*((e+1)/2-1))*3;o=[t+30,t+42]}else if(0==e)if(u){const e=24*(s/2-1)*3,t=s/2*24*3;o=[e+21,e+33,t+3,t+15]}else{const e=24*((s+1)/2-1)*3;o=[e+12,e+24]}else if(u){const e=24*(s/2-1+i*(i-1))*3,t=24*(s/2+i*(i-1))*3;o=[e+39,e+51,t+57,t+69]}else{const e=24*((s+1)/2-1+i*(i-1))*3;o=[e+48,e+60]}else if(u&&h){const t=24*(s/2-1+i*(e/2-1))*3,n=24*(s/2+i*(e/2-1))*3,r=24*(s/2-1+i*(e/2))*3,a=24*(s/2+i*(e/2))*3;o=[t+39,t+51,n+57,n+69,r+21,r+33,a+3,a+15]}else if(u&&!h){const t=24*(s/2-1+i*((e+1)/2-1))*3,n=24*(s/2+i*((e+1)/2-1))*3;o=[t+30,t+42,n+6,n+66]}else if(!u&&h){const t=24*((s+1)/2-1+i*(e/2-1))*3,n=24*((s+1)/2-1+i*(e/2))*3;o=[t+48,t+60,n+12,n+24]}else{const t=24*((s+1)/2-1+i*((e+1)/2-1))*3;o=[t,t+9,t+18,t+27,t+36,t+45,t+54,t+63]}const d=o[0],l=t(n[d],n[d+1],n[d+2]);o.forEach(e=>{n[e]=l[0],n[e+1]=l[1],n[e+2]=l[2]})}return n}(this.mesh,e,this.planet.resolution);this.mesh.updateVerticesData(BABYLON.VertexBuffer.PositionKind,t),this.mesh.refreshBoundingInfo(!0),this.corners=this.getCorners(this.mesh,this.planet.resolution)}figureRoundFunc(e,t){return(s,n,i)=>{const r=Math.pow((s-t.x)/e,2),o=Math.pow((n-t.y)/e,2),a=Math.pow((i-t.z)/e,2);let c=(s-t.x)*Math.sqrt(1-o/2-a/2+o*a/3),u=(n-t.y)*Math.sqrt(1-a/2-r/2+a*r/3),h=(i-t.z)*Math.sqrt(1-r/2-o/2+r*o/3);if(this.generateTerrain){const e=(c+this.perlinDir)*this.perlinFreq,t=(u+this.perlinDir)*this.perlinFreq,s=(h+this.perlinDir)*this.perlinFreq,n=1+this.perlinAmp*this.planet.perlin.noise(e,t,s);c*=n,u*=n,h*=n}return[t.x+c,t.y+u,t.z+h]}}checkIfUpdates(){const e=this.checkIfGenerateNodes(),t=this.checkIfDisposeNodes();return e||t}checkIfGenerateNodes(){if(!(this.isActive&&this.size>this.minNodeSize))return!1;if(this.distance<this.nodeUpdateDistance){const e=[1,2,3,4].map(function(e,t,s){const i=t,r=s/4;switch(e){case"Front":return e=>{switch(e){case 1:return i.add(new n.Vector3(-r,r,0));case 2:return i.add(new n.Vector3(r,r,0));case 3:return i.add(new n.Vector3(-r,-r,0));case 4:return i.add(new n.Vector3(r,-r,0))}};case"Back":return e=>{switch(e){case 1:return i.add(new n.Vector3(r,r,0));case 2:return i.add(new n.Vector3(-r,r,0));case 3:return i.add(new n.Vector3(r,-r,0));case 4:return i.add(new n.Vector3(-r,-r,0))}};case"Up":return e=>{switch(e){case 1:return i.add(new n.Vector3(-r,0,r));case 2:return i.add(new n.Vector3(r,0,r));case 3:return i.add(new n.Vector3(-r,0,-r));case 4:return i.add(new n.Vector3(r,0,-r))}};case"Down":return e=>{switch(e){case 1:return i.add(new n.Vector3(-r,0,-r));case 2:return i.add(new n.Vector3(r,0,-r));case 3:return i.add(new n.Vector3(-r,0,r));case 4:return i.add(new n.Vector3(r,0,r))}};case"Right":return e=>{switch(e){case 1:return i.add(new n.Vector3(0,r,-r));case 2:return i.add(new n.Vector3(0,r,r));case 3:return i.add(new n.Vector3(0,-r,-r));case 4:return i.add(new n.Vector3(0,-r,r))}};case"Left":return e=>{switch(e){case 1:return i.add(new n.Vector3(0,r,r));case 2:return i.add(new n.Vector3(0,r,-r));case 3:return i.add(new n.Vector3(0,-r,r));case 4:return i.add(new n.Vector3(0,-r,-r))}}}}(this.name,this.position,this.size)).map((e,t)=>{const s=new m(this.name,e,this.size/2,this.planet,t);return this.planet.nodes.push(s),s});return this.nodes=e,this.mesh.setEnabled(!1),this.isActive=!1,!0}}checkIfDisposeNodes(){return!this.isActive&&this.distance>this.nodeUpdateDistance&&(this.disposeNodes(),!0)}disposeNodes(){this.nodes&&(this.nodes.forEach(e=>{e.disposeNodes(),e.mesh.dispose(),this.removeNodeFromNodesArray(e)}),this.nodes=null,this.mesh.setEnabled(!0),this.isActive=!0)}removeNodeFromNodesArray(e){const t=this.planet.nodes;t.splice(t.indexOf(e),1)}}function g(e,t){const s=new n.PBRMaterial("metal",e);return s.reflectionTexture=e.environmentTexture,s.microSurface=.96,s.reflectivityColor=t||new n.Color3(.85,.85,.85),s.albedoColor=new n.Color3(.01,.01,.01),s}function V(e,t){const s=new n.PBRMaterial("plastic",e);return s.reflectionTexture=e.environmentTexture,s.microSurface=.96,s.albedoColor=t||new n.Color3(.206,.94,1),s.reflectivityColor=new n.Color3(.003,.003,.003),s}function v(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;t<256;t++)e[256+t]=e[t];function s(e){return e*e*e*(e*(6*e-15)+10)}function n(e,t,s){return t+e*(s-t)}function i(e,t,s,n){var i=15&e,r=i<8?t:s,o=i<4?s:12==i||14==i?t:n;return(0==(1&i)?r:-r)+(0==(2&i)?o:-o)}return{noise:function(t,r,o){var a=~~t,c=~~r,u=~~o,h=255&a,d=255&c,l=255&u,f=(t-=a)-1,p=(r-=c)-1,w=(o-=u)-1,m=s(t),g=s(r),V=s(o),v=e[h]+d,B=e[v]+l,b=e[v+1]+l,y=e[h+1]+d,C=e[y]+l,x=e[y+1]+l;return n(V,n(g,n(m,i(e[B],t,r,o),i(e[C],f,r,o)),n(m,i(e[b],t,p,o),i(e[x],f,p,o))),n(g,n(m,i(e[B+1],t,r,w),i(e[C+1],f,r,o-1)),n(m,i(e[b+1],t,p,w),i(e[x+1],f,p,w))))}}}class B{constructor(e,t,s,i){this.radius=s,this.resolution=i,this.position=t,this.scene=e,this.material=function(e,t){const s=new n.PBRMaterial("glass",e);return s.reflectionTexture=e.environmentTexture,s.refractionTexture=e.environmentTexture,s.linkRefractionWithTransparency=!0,s.indexOfRefraction=.52,s.alpha=0,s.microSurface=1,s.reflectivityColor=new n.Color3(.2,.2,.2),s.albedoColor=t||new n.Color3(.3,1,.3),s}(e,new BABYLON.Color3(.85,.85,.85)),this.nodes=[],this.queue=[],this.disposeQueue=[],this.scene.updatePlanet=!0,this.perlin=new v,this.onCreate()}onCreate(){this.createSides()}createSides(){[["Up",this.position.add(new n.Vector3(0,this.radius,0))],["Down",this.position.add(new n.Vector3(0,-this.radius,0))],["Front",this.position.add(new n.Vector3(0,0,-this.radius))],["Back",this.position.add(new n.Vector3(0,0,this.radius))],["Right",this.position.add(new n.Vector3(this.radius,0,0))],["Left",this.position.add(new n.Vector3(-this.radius,0,0))]].forEach(e=>{const t=new m(e[0],e[1],2*this.radius,this);this.nodes.push(t)})}update(){this.scene.updatePlanet&&this.updateQueue()}updateQueue(){if(0==this.queue.length)this.disposeAllInQueue(),this.queue=this.makeQueuesFromNodes(this.nodes);else{let e,t=!1;for(;this.queue.length>0&&!t;)t=(e=this.queue.shift()).checkIfUpdates();t&&e.nodes&&(this.queue=this.insertNodesToQueue(e.nodes,this.queue))}this.disposeQueue.length>0&&this.disposeQueue.shift().checkIfDisposeNodes()}makeQueuesFromNodes(e){this.setDistances(e);const t=e.filter(e=>{return!!e.isRenderable()||(this.disposeQueue.push(e),!1)});return t.sort((e,t)=>e.distance-t.distance),this.disposeQueue.sort((e,t)=>e.distance-t.distance),t}insertNodesToQueue(e,t){this.setDistances(e);const s=[];let n=0,i=0;for(;n<e.length&&i<t.length;)e[n].distance<t[i].distance?(s.push(e[n]),n++):(s.push(t[i]),i++);for(let t=n;t<e.length;t++)s.push(e[t]);for(let e=i;e<t.length;e++)s.push(t[e]);return s}setDistances(e){e.forEach(e=>{e.setDistance(this.scene.activeCamera),e.setIsVisible(this.scene.activeCamera)})}disposeAllInQueue(){for(;this.disposeQueue.length>0;)this.disposeQueue.shift().checkIfDisposeNodes()}}var b=s("G9zD");var y=s("VfJ7"),C=s("GR64");var x={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return x.Android()||x.BlackBerry()||x.iOS()||x.Opera()||x.Windows()}};const N=x.any()?4:8,k=200,D=new b.i(0,0,0);function A(){const e=document.getElementById("renderCanvas"),t=new b.b(e,!0),s=new b.g(t);new b.c("light1",new b.i(0,1,0),s);return function(e,t){const s=new y.a("Camera",0,0,0,new C.x(0,0,0),e);return s.setPosition(new C.x(0,40,-1e3)),s.allowUpsideDown=!1,s.minZ=1,s.maxZ=5e5,s.lowerRadiusLimit=t+10,s.angularSensibilityX=2e3,s.angularSensibilityy=2e3,s}(s,k).attachControl(e,!1),function(e){var t=b.a.CreateFromPrefilteredData("https://assets.babylonjs.com/environments/environmentSpecular.env",e);e.environmentTexture=t,e.imageProcessingConfiguration.exposure=.6,e.imageProcessingConfiguration.contrast=1.6;var s=b.e.CreateBox("hdrSkyBox",1e5,e),n=new b.f("skyBox",e);n.backFaceCulling=!1,n.reflectionTexture=t.clone(),n.reflectionTexture.coordinatesMode=b.h.SKYBOX_MODE,n.microSurface=.3,n.disableLighting=!0,s.material=n,s.infiniteDistance=!0}(s),function(e,t){let s=BABYLON.MeshBuilder.CreateSphere("",{diameter:.2},t);s.position=e;let n=new BABYLON.StandardMaterial("",t);n.diffuseColor=new BABYLON.Color3(1,0,0),s.material=n,s.isPickable=!1,s.checkCollisions=!0,s.applyGravity=!0}(D,s),s.planet=new B(s,D,k,N),function(e){e.customMaterials=[g(e,new n.Color3(1,.1,.1)),V(e,new n.Color3(.5,1,.5)),V(e,new n.Color3(.3,1,.8)),g(e,new n.Color3(.3,.2,1))]}(s),s.registerBeforeRender(function(){s.planet.update()}),t.runRenderLoop(function(){s.render()}),window.addEventListener("resize",function(){t.resize()}),s}s("8Lv4");window.addEventListener("DOMContentLoaded",function(){!function(e){let t=!1,s=!1;e.onKeyboardObservable.add(n=>{switch(n.type){case b.d.KEYDOWN:switch(n.event.key){case"w":case"W":t=!t,e.materials.forEach(e=>{e.wireframe=t});break;case"b":case"B":s=!s,e.meshes.forEach(e=>{e.showBoundingBox=s});break;case"I":case"i":e.debugLayer.isVisible()?e.debugLayer.hide():e.debugLayer.show();break;case"S":case"s":e.updatePlanet=!e.updatePlanet}}})}(A()),setTimeout(()=>{document.getElementById("loading").style.opacity=0},1e3)})}},[["Vtdi",1,2]]]);