(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"8Lv4":function(e,t,s){var n=s("N5i1");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(n,r);n.locals&&(e.exports=n.locals)},N5i1:function(e,t,s){},Vtdi:function(e,t,s){"use strict";s.r(t);var n=s("v5Mq");function r(e,t,s,r){const i=[];for(let o=r-1;o>=0;o--)for(let a=0;a<r;a++){const r=a*s-t/2+s/2,c=o*s-t/2+s/2,u=d(e.add(new n.Vector3(r,c,0)),s);i.push(u)}return i.flat()}function i(e,t,s,r){const i=[];for(let o=r-1;o>=0;o--)for(let a=r-1;a>=0;a--){const r=a*s-t/2+s/2,c=o*s-t/2+s/2,u=h(e.add(new n.Vector3(r,c,0)),s);i.push(u)}return i.flat()}function o(e,t,s,r){const i=[];for(let o=r-1;o>=0;o--)for(let a=0;a<r;a++){const r=a*s-t/2+s/2,c=o*s-t/2+s/2,u=l(e.add(new n.Vector3(r,0,c)),s);i.push(u)}return i.flat()}function a(e,t,s,r){const i=[];for(let o=0;o<r;o++)for(let a=0;a<r;a++){const r=a*s-t/2+s/2,c=o*s-t/2+s/2,u=f(e.add(new n.Vector3(r,0,c)),s);i.push(u)}return i.flat()}function c(e,t,s,r){const i=[];for(let o=r-1;o>=0;o--)for(let a=0;a<r;a++){const r=a*s-t/2+s/2,c=o*s-t/2+s/2,u=w(e.add(new n.Vector3(0,c,r)),s);i.push(u)}return i.flat()}function u(e,t,s,r){const i=[];for(let o=r-1;o>=0;o--)for(let a=r-1;a>=0;a--){const r=a*s-t/2+s/2,c=o*s-t/2+s/2,u=p(e.add(new n.Vector3(0,c,r)),s);i.push(u)}return i.flat()}function d(e,t){const s=e.x,n=e.y,r=e.z,i=t/2;return[s,n,r,s-i,n+i,r,s-i,n,r,s,n,r,s,n+i,r,s-i,n+i,r,s,n,r,s+i,n+i,r,s,n+i,r,s,n,r,s+i,n,r,s+i,n+i,r,s,n,r,s+i,n-i,r,s+i,n,r,s,n,r,s,n-i,r,s+i,n-i,r,s,n,r,s-i,n-i,r,s,n-i,r,s,n,r,s-i,n,r,s-i,n-i,r]}function h(e,t){const s=e.x,n=e.y,r=e.z,i=t/2;return[s,n,r,s+i,n+i,r,s+i,n,r,s,n,r,s,n+i,r,s+i,n+i,r,s,n,r,s-i,n+i,r,s,n+i,r,s,n,r,s-i,n,r,s-i,n+i,r,s,n,r,s-i,n-i,r,s-i,n,r,s,n,r,s,n-i,r,s-i,n-i,r,s,n,r,s+i,n-i,r,s,n-i,r,s,n,r,s+i,n,r,s+i,n-i,r]}function l(e,t){const s=e.x,n=e.y,r=e.z,i=t/2;return[s,n,r,s-i,n,r+i,s-i,n,r,s,n,r,s,n,r+i,s-i,n,r+i,s,n,r,s+i,n,r+i,s,n,r+i,s,n,r,s+i,n,r,s+i,n,r+i,s,n,r,s+i,n,r-i,s+i,n,r,s,n,r,s,n,r-i,s+i,n,r-i,s,n,r,s-i,n,r-i,s,n,r-i,s,n,r,s-i,n,r,s-i,n,r-i]}function f(e,t){const s=e.x,n=e.y,r=e.z,i=t/2;return[s,n,r,s-i,n,r-i,s-i,n,r,s,n,r,s,n,r-i,s-i,n,r-i,s,n,r,s+i,n,r-i,s,n,r-i,s,n,r,s+i,n,r,s+i,n,r-i,s,n,r,s+i,n,r+i,s+i,n,r,s,n,r,s,n,r+i,s+i,n,r+i,s,n,r,s-i,n,r+i,s,n,r+i,s,n,r,s-i,n,r,s-i,n,r+i]}function w(e,t){const s=e.x,n=e.y,r=e.z,i=t/2;return[s,n,r,s,n+i,r-i,s,n,r-i,s,n,r,s,n+i,r,s,n+i,r-i,s,n,r,s,n+i,r+i,s,n+i,r,s,n,r,s,n,r+i,s,n+i,r+i,s,n,r,s,n-i,r+i,s,n,r+i,s,n,r,s,n-i,r,s,n-i,r+i,s,n,r,s,n-i,r-i,s,n-i,r,s,n,r,s,n,r-i,s,n-i,r-i]}function p(e,t){const s=e.x,n=e.y,r=e.z,i=t/2;return[s,n,r,s,n+i,r+i,s,n,r+i,s,n,r,s,n+i,r,s,n+i,r+i,s,n,r,s,n+i,r-i,s,n+i,r,s,n,r,s,n,r-i,s,n+i,r-i,s,n,r,s,n-i,r-i,s,n,r-i,s,n,r,s,n-i,r,s,n-i,r-i,s,n,r,s,n-i,r+i,s,n-i,r,s,n,r,s,n,r+i,s,n-i,r+i]}class m{constructor(e,t,s,n,r){this.name=e,this.position=t,this.size=s,this.planet=n,this.isSide=s===2*this.planet.radius,this.mesh,this.corners,this.distance,this.isVisible=!0,this.nodes=[],this.id=r||-1,this.material=-1==this.id?this.planet.material:function(e,t){switch(t){case 0:return e.customMaterials[0];case 1:return e.customMaterials[1];case 2:return e.customMaterials[2];case 3:return e.customMaterials[3]}}(this.planet.scene,r),this.minNodeSize=.5,this.nodeUpdateDistance=Math.pow(this.size,1.5),this.onCreate()}onCreate(){this.mesh=this.generateMesh(),this.mapCubeToShere(),this.corners=this.getCorners(this.mesh,this.planet.resolution)}setDistance(e){const t=e.globalPosition;this.distance=this.corners.map(e=>BABYLON.Vector3.Distance(e,t)).reduce((e,t)=>e<t?e:t)}generateMesh(){const e=new n.Mesh("",this.planet.scene);return function(e,t,s,d){const h=Math.pow(d,2),l=s/d,f=Array.from(Array(24*h).keys());let w;switch(e){case"Front":w=r;break;case"Back":w=i;break;case"Up":w=o;break;case"Down":w=a;break;case"Right":w=c;break;case"Left":w=u}const p=new n.VertexData;return p.positions=w(t,s,l,d),p.indices=f,p}(this.name,this.position,this.size,this.planet.resolution,this.planet.scene).applyToMesh(e,!0),e.material=this.material,e}getCorners(e,t){const s=e.getVerticesData(BABYLON.VertexBuffer.PositionKind);return[3,24*(t-1)*3+21,t*(t-1)*24*3+57,24*(t-1+t*(t-1))*3+39].map(e=>{const t=s[e],r=s[e+1],i=s[e+2];return new n.Vector3(t,r,i)})}mapCubeToShere(){const e=this.figureRoundFunc(this.planet.radius,this.planet.position),t=function(e,t,s){const n=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),r=s,i=2*r+1;for(let e=0;e<i;e++)for(let s=0;s<i;s++){let o=[];const a=0==s||s==i-1,c=0==e||e==i-1,u=s%2==0,d=e%2==0;if(a||c)if(a&&c)if(0==s&&0==e)o=[3,15];else if(s==i-1&&0==e){const e=24*(r-1)*3;o=[e+21,e+33]}else if(0==s&&e==i-1){const e=r*(r-1)*24*3;o=[e+57,e+69]}else{const e=24*(r-1+r*(r-1))*3;o=[e+39,e+51]}else if(a&&!c)if(0==s)if(d){const t=r*(e/2-1)*24*3,s=r*(e/2)*24*3;o=[t+57,t+69,s+3,s+15]}else{const t=r*((e+1)/2-1)*24*3;o=[t+6,t+66]}else if(d){const t=24*(r-1+r*(e/2-1))*3,s=24*(r-1+r*(e/2))*3;o=[t+39,t+51,s+21,s+33]}else{const t=24*(r-1+r*((e+1)/2-1))*3;o=[t+30,t+42]}else if(0==e)if(u){const e=24*(s/2-1)*3,t=s/2*24*3;o=[e+21,e+33,t+3,t+15]}else{const e=24*((s+1)/2-1)*3;o=[e+12,e+24]}else if(u){const e=24*(s/2-1+r*(r-1))*3,t=24*(s/2+r*(r-1))*3;o=[e+39,e+51,t+57,t+69]}else{const e=24*((s+1)/2-1+r*(r-1))*3;o=[e+48,e+60]}else if(u&&d){const t=24*(s/2-1+r*(e/2-1))*3,n=24*(s/2+r*(e/2-1))*3,i=24*(s/2-1+r*(e/2))*3,a=24*(s/2+r*(e/2))*3;o=[t+39,t+51,n+57,n+69,i+21,i+33,a+3,a+15]}else if(u&&!d){const t=24*(s/2-1+r*((e+1)/2-1))*3,n=24*(s/2+r*((e+1)/2-1))*3;o=[t+30,t+42,n+6,n+66]}else if(!u&&d){const t=24*((s+1)/2-1+r*(e/2-1))*3,n=24*((s+1)/2-1+r*(e/2))*3;o=[t+48,t+60,n+12,n+24]}else{const t=24*((s+1)/2-1+r*((e+1)/2-1))*3;o=[t,t+9,t+18,t+27,t+36,t+45,t+54,t+63]}const h=o[0],l=t(n[h],n[h+1],n[h+2]);o.forEach(e=>{n[e]=l[0],n[e+1]=l[1],n[e+2]=l[2]})}return n}(this.mesh,e,this.planet.resolution);this.mesh.updateVerticesData(BABYLON.VertexBuffer.PositionKind,t),this.mesh.refreshBoundingInfo(!0)}figureRoundFunc(e,t){return(s,n,r)=>{const i=Math.pow((s-t.x)/e,2),o=Math.pow((n-t.y)/e,2),a=Math.pow((r-t.z)/e,2),c=(s-t.x)*Math.sqrt(1-o/2-a/2+o*a/3),u=(n-t.y)*Math.sqrt(1-a/2-i/2+a*i/3),d=(r-t.z)*Math.sqrt(1-i/2-o/2+i*o/3);return[t.x+c,t.y+u,t.z+d]}}checkIfUpdates(){const e=this.checkIfGenerateNodes(),t=this.checkIfDisposeNodes();return e||t}checkIfGenerateNodes(){return!!(this.isVisible&&this.size>this.minNodeSize)&&(this.distance<this.nodeUpdateDistance?([1,2,3,4].map(function(e,t,s){const r=t,i=s/4;switch(e){case"Front":return e=>{switch(e){case 1:return r.add(new n.Vector3(-i,i,0));case 2:return r.add(new n.Vector3(i,i,0));case 3:return r.add(new n.Vector3(-i,-i,0));case 4:return r.add(new n.Vector3(i,-i,0))}};case"Back":return e=>{switch(e){case 1:return r.add(new n.Vector3(i,i,0));case 2:return r.add(new n.Vector3(-i,i,0));case 3:return r.add(new n.Vector3(i,-i,0));case 4:return r.add(new n.Vector3(-i,-i,0))}};case"Up":return e=>{switch(e){case 1:return r.add(new n.Vector3(-i,0,i));case 2:return r.add(new n.Vector3(i,0,i));case 3:return r.add(new n.Vector3(-i,0,-i));case 4:return r.add(new n.Vector3(i,0,-i))}};case"Down":return e=>{switch(e){case 1:return r.add(new n.Vector3(-i,0,-i));case 2:return r.add(new n.Vector3(i,0,-i));case 3:return r.add(new n.Vector3(-i,0,i));case 4:return r.add(new n.Vector3(i,0,i))}};case"Right":return e=>{switch(e){case 1:return r.add(new n.Vector3(0,i,-i));case 2:return r.add(new n.Vector3(0,i,i));case 3:return r.add(new n.Vector3(0,-i,-i));case 4:return r.add(new n.Vector3(0,-i,i))}};case"Left":return e=>{switch(e){case 1:return r.add(new n.Vector3(0,i,i));case 2:return r.add(new n.Vector3(0,i,-i));case 3:return r.add(new n.Vector3(0,-i,i));case 4:return r.add(new n.Vector3(0,-i,-i))}}}}(this.name,this.position,this.size)).forEach((e,t)=>{const s=new m(this.name,e,this.size/2,this.planet,t);this.nodes.push(s),this.planet.nodes.push(s)}),this.mesh.setEnabled(!1),this.isVisible=!1,!0):void 0)}checkIfDisposeNodes(){return!this.isVisible&&this.distance>this.nodeUpdateDistance&&(this.disposeNodes(),!0)}disposeNodes(){this.nodes.forEach(e=>{e.disposeNodes(),e.mesh.dispose()}),this.nodes=[],this.mesh.setEnabled(!0),this.isVisible=!0}}function V(e,t){const s=new n.PBRMaterial("metal",e);return s.reflectionTexture=e.environmentTexture,s.microSurface=.96,s.reflectivityColor=t||new n.Color3(.85,.85,.85),s.albedoColor=new n.Color3(.01,.01,.01),s}function B(e,t){const s=new n.PBRMaterial("plastic",e);return s.reflectionTexture=e.environmentTexture,s.microSurface=.96,s.albedoColor=t||new n.Color3(.206,.94,1),s.reflectivityColor=new n.Color3(.003,.003,.003),s}class g{constructor(e,t,s,r){this.radius=s,this.resolution=r,this.position=t,this.scene=e,this.material=function(e,t){const s=new n.PBRMaterial("glass",e);return s.reflectionTexture=e.environmentTexture,s.refractionTexture=e.environmentTexture,s.linkRefractionWithTransparency=!0,s.indexOfRefraction=.52,s.alpha=0,s.microSurface=1,s.reflectivityColor=new n.Color3(.2,.2,.2),s.albedoColor=t||new n.Color3(.3,1,.3),s}(e,new BABYLON.Color3(.3,.2,1)),this.nodes=[],this.queue=[],this.createSides(),this.scene.updatePlanet=!0}createSides(){[["Up",this.position.add(new n.Vector3(0,this.radius,0))],["Down",this.position.add(new n.Vector3(0,-this.radius,0))],["Front",this.position.add(new n.Vector3(0,0,-this.radius))],["Back",this.position.add(new n.Vector3(0,0,this.radius))],["Right",this.position.add(new n.Vector3(this.radius,0,0))],["Left",this.position.add(new n.Vector3(-this.radius,0,0))]].forEach(e=>{const t=new m(e[0],e[1],2*this.radius,this);this.nodes.push(t)})}update(){this.scene.updatePlanet&&this.updateQueue()}updateQueue(){if(0==this.queue.length)this.queue=this.makeQueueFromNodes(this.nodes);else{let e,t=!1;for(;this.queue.length>0&&!t;)t=(e=this.queue.shift()).checkIfUpdates();t&&(this.queue=this.insertNodesToQueue(e.nodes,this.queue))}}makeQueueFromNodes(e){this.setDistances(e);const t=Array.from(e);return t.sort((e,t)=>e.distance-t.distance),t}insertNodesToQueue(e,t){this.setDistances(e);const s=[];let n=0,r=0;for(;n<e.length&&r<t.length;)e[n].distance<t[r].distance?(s.push(e[n]),n++):(s.push(t[r]),r++);for(let t=n;t<e.length;t++)s.push(e[t]);for(let e=r;e<t.length;e++)s.push(t[e]);return s}setDistances(e){e.forEach(e=>{e.setDistance(this.scene.activeCamera)})}}var b=s("G9zD");var C=s("VfJ7"),y=s("GR64");const x=4,v=20,k=new b.i(0,0,0);function N(){const e=document.getElementById("renderCanvas"),t=new b.b(e,!0),s=new b.g(t);new b.c("light1",new b.i(0,1,0),s);return function(e,t){const s=new C.a("Camera",0,0,0,new y.x(0,0,0),e);return s.setPosition(new y.x(0,40,-300)),s.allowUpsideDown=!1,s.lowerRadiusLimit=t+2,s.angularSensibilityX=2e3,s.angularSensibilityy=2e3,s}(s,v).attachControl(e,!1),function(e){var t=b.a.CreateFromPrefilteredData("https://assets.babylonjs.com/environments/environmentSpecular.env",e);e.environmentTexture=t,e.imageProcessingConfiguration.exposure=.6,e.imageProcessingConfiguration.contrast=1.6;var s=b.e.CreateBox("hdrSkyBox",1e3,e),n=new b.f("skyBox",e);n.backFaceCulling=!1,n.reflectionTexture=t.clone(),n.reflectionTexture.coordinatesMode=b.h.SKYBOX_MODE,n.microSurface=.3,n.disableLighting=!0,s.material=n,s.infiniteDistance=!0}(s),function(e,t){let s=BABYLON.MeshBuilder.CreateSphere("",{diameter:.2},t);s.position=e;let n=new BABYLON.StandardMaterial("",t);n.diffuseColor=new BABYLON.Color3(1,0,0),s.material=n,s.isPickable=!1,s.checkCollisions=!0,s.applyGravity=!0}(k,s),s.planet=new g(s,k,v,x),function(e){e.customMaterials=[V(e,new BABYLON.Color3(1,.1,.1)),B(e,new BABYLON.Color3(.3,1,.3)),B(e,new BABYLON.Color3(.3,1,1)),V(e,new BABYLON.Color3(.3,.2,1))]}(s),s.registerBeforeRender(function(){s.planet.update()}),t.runRenderLoop(function(){s.render()}),window.addEventListener("resize",function(){t.resize()}),s}s("8Lv4");window.addEventListener("DOMContentLoaded",function(){!function(e){let t=!1,s=!1;e.onKeyboardObservable.add(n=>{switch(n.type){case b.d.KEYDOWN:switch(n.event.key){case"w":case"W":t=!t,e.materials.forEach(e=>{e.wireframe=t});break;case"b":case"B":s=!s,e.meshes.forEach(e=>{e.showBoundingBox=s});break;case"I":case"i":e.debugLayer.isVisible()?e.debugLayer.hide():e.debugLayer.show();break;case"S":case"s":e.updatePlanet=!e.updatePlanet}}})}(N())})}},[["Vtdi",1,2]]]);